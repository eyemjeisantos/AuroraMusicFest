<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ticket Confirmed</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <section class="confirm-container">
    <h1 class="confirm-title">ðŸŽŸ Ticket Confirmed</h1>

    <div id="ticket-code-section" class="ticket-code-section">
      <h2>Your Ticket Code</h2>
      <div class="ticket-code-box">
        <p id="ticket-code" class="ticket-code">LOADING...</p>
      </div>
      <button onclick="copyTicketCode()" class="copy-btn">Copy Ticket Code</button>
    </div>

    <div id="ticket-details-section" class="ticket-details-section">
      <h2>Ticket Details</h2>
      <div class="ticket-details">
        <div class="detail-row">
          <span class="detail-label">Full Name:</span>
          <span class="detail-value" id="detail-fullName">-</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Mobile Number:</span>
          <span class="detail-value" id="detail-mobileNumber">-</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Email Address:</span>
          <span class="detail-value" id="detail-email">-</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Confirmation Date:</span>
          <span class="detail-value" id="detail-date">-</span>
        </div>
      </div>
    </div>

    <div class="action-buttons">
      <button onclick="printReceipt()" class="btn-print">Print Receipt</button>
      <a href="index.html" class="btn-home">Go Home</a>
    </div>

  <script src="submit.js"></script>
  <script>
    function generateTicketCode() {
      const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
      let code = '';
      for (let i = 0; i < 18; i++) {
        code += characters.charAt(Math.floor(Math.random() * characters.length));
      }
      return code;
    }

    function copyTicketCode() {
      const ticketCode = document.getElementById('ticket-code').textContent;
      navigator.clipboard.writeText(ticketCode).then(() => {
        alert('Ticket code copied to clipboard!');
      });
    }

    function displayTicketInfo() {
      const ticketData = JSON.parse(localStorage.getItem('ticketData'));

      if (ticketData) {
        document.getElementById('detail-fullName').textContent = ticketData.fullName;
        document.getElementById('detail-mobileNumber').textContent = ticketData.mobileNumber;
        document.getElementById('detail-email').textContent = ticketData.email;
        
        const confirmationDate = new Date(ticketData.timestamp).toLocaleDateString('en-US', {
          year: 'numeric',
          month: 'long',
          day: 'numeric',
          hour: '2-digit',
          minute: '2-digit'
        });
        document.getElementById('detail-date').textContent = confirmationDate;
      }

      const ticketCode = generateTicketCode();
      document.getElementById('ticket-code').textContent = ticketCode;
      localStorage.setItem('generatedTicketCode', ticketCode);
    }

    function printReceipt() {
      window.print();
    }

    window.addEventListener('load', displayTicketInfo);
  </script>
</body>

</html>